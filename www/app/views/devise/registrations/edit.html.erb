<% content_for(:head_title) { "Mon compte" } %>


<% if current_conservateur %>
  <main class="fr-container fr-py-4w fr-grid-row fr-grid-row--center" data-controller="devise--sessions">
    <div class="fr-col-md-8">
      <%= render("shared/breadcrumbs", links: [["Accueil", root_path]], current_page_label: "Mon compte") %>

      <div class="fr-mb-6w">
        <h3>Mon compte</h3>
        <ul>
          <li>Prénom: <b><%= current_conservateur.first_name %></b></li>
          <li>Nom: <b><%= current_conservateur.last_name %></b></li>
        </ul>
        <p>
          <%= link_to "Déconnexion", destroy_user_session_path, class: "fr-btn fr-btn--secondary fr-fi-logout-box-r-line fr-btn--icon-left", data: { turbo_method: :delete } %>
        </p>
      </div>
    </div>
  </main>
<% elsif current_user %>
  <main class="fr-container fr-py-4w fr-grid-row fr-grid-row--center" data-controller="devise--sessions">
    <div class="fr-col-md-8">
      <%= render("shared/breadcrumbs", links: [["Accueil", root_path]], current_page_label: "Mon compte") %>

      <div class="fr-mb-6w">
        <h3>Mon compte</h3>
        <p>
          <b>Email&#8239;</b>: <%= current_user.email %><br />
          <b>Commune&#8239;</b>: <%= current_user.commune&.nom || "N/A" %>
        </p>
        <p>
          <%= link_to "Déconnexion", destroy_user_session_path, class: "fr-btn fr-btn--secondary fr-fi-logout-box-r-line fr-btn--icon-left", data: { turbo_method: :delete } %>
        </p>
      </div>
      <div class="fr-mb-6w">
        <h3>Suppression</h3>
        <p><%= button_to "Supprimer mon compte ", registration_path(resource_name), form: { data: { turbo_confirm: "Êtes-vous sûr(e) de vouloir supprimer votre compte ?" } }, method: :delete, class: "fr-btn fr-btn--secondary fr-fi-delete-line fr-btn--icon-left" %></p>
      </div>
    </div>
  </main>
<% end %>
